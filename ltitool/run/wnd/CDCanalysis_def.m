%
% Set the graphics toolkit and force read this file as script file (not a function file).
%
graphics_toolkit qt;
%


%
%
% Begin callbacks definitions 
%

function btn_closeCDCanalysis_doIt(source, callbackdata, CDCanalysis)


% cierro ventana
close(CDCanalysis.CDCanalysis);

end

function btn_rlocus_internalGH_doIt(source, callbackdata, CDCanalysis)

%
% Plot root locus
%

% global variable
global _basePath;

%
% Load predefined data
% --------------------------------
load([_basePath filesep() 'data' filesep() 'loadCDCdata'])

GHint, Krint

% Plot root locus
% ----------------------------------
axes(dlg.ImageLR);
cla(dlg.ImageLR, "reset");
[Kast,Kast_ult,wultimo,GM,wcg,PM]=GHrlocusplot(GHint.num{1,1},GHint.den{1,1},Krint,1000);
hold off

end

function btn_Bode_internalGH_doIt(source, callbackdata, CDCanalysis)


%
% Plot Bode diagrams
%

% global variable
global _basePath;

%
% Load predefined data
% --------------------------------
load([_basePath filesep() 'data' filesep() 'loadCDCdata'])

% Plot Bode diagrams
% ----------------------------------
axes(dlg.ImageBodeMag);
cla(dlg.ImageBodeMag, "reset");
delay=0;
flagMagPha='gragicoMag';
[Kast,Kast_ult,wultimo,GM,wcg,PM]=bodeplotMagPha(GHint.num{1,1},GHint.den{1,1},delay,Krint,flagMagPha);
hold off
axes(dlg.ImageBodePha);
cla(dlg.ImageBodePha, "reset");
flagMagPha='gragicoPha';
[Kast,Kast_ult,wultimo,GM,wcg,PM]=bodeplotMagPha(GHint.num{1,1},GHint.den{1,1},delay,Krint,flagMagPha);
hold off

end

function btn_Nyquist_internalGH_doIt(source, callbackdata, CDCanalysis)


%
% Plot Bode diagrams
%

% global variable
global _basePath;

%
% Load predefined data
% --------------------------------
load([_basePath filesep() 'data' filesep() 'loadCDCdata'])

% Plot Nyquist diagram
% ----------------------------------
axes(dlg.ImageNyq);
cla(dlg.ImageNyq, "reset");
delay=0;
[Kast,Kast_ult,wultimo,GM,wcg,PM]=GHnyquistplot(GHint.num{1,1},GHint.den{1,1},delay,Krint);
hold off

end

function btn_internalGHmap_doIt(source, callbackdata, CDCanalysis)

%
% Plot zeros-poles map of internal G(s)H(s)
%

% global variable
global _basePath;

%
% Load predefined data
% --------------------------------
load([_basePath filesep() 'data' filesep() 'loadCDCdata'])

% ----------------------------------
% Zeros-Poles map of G(s)H(s)
% ----------------------------------
legend_ceros_string='Zeros of internal G(s)H(s)';
legend_polos_string='Poles of internal G(s)H(s)';

% Plot zeros-poles map
% ----------------------------------
axes(dlg.ImageZPGH);
xpzmap([],legend_ceros_string,legend_polos_string,GHint.num{1,1},GHint.den{1,1});
figuraGH=1;

end

function btn_internalGcl_doIt(source, callbackdata, CDCanalysis)

%
% Plot zeros-poles map of internal closed loop system
%

% global variable
global _basePath;

%
% Load predefined data
% --------------------------------
load([_basePath filesep() 'data' filesep() 'loadCDCdata'])

% Internal closed loop transfer function,  Gclint1(s)
Gastint1 = minreal(Cint*Gv*Gp2/(1+GHint));

% ------------------------------------------------------------------------------------
% Zeros-Poles map of internal closed loop system,  Gcl(s)
legend_ceros_string='Zeros of internal Gcl(s)';
legend_polos_string='Poles of internal Gcl(s)';

% Zeros-Poles map
% ----------------------------------
axes(dlg.ImageZPGLC);
xpzmap([],legend_ceros_string,legend_polos_string,Gastint1.num{1,1},Gastint1.den{1,1});
figuraGH=2;
% ------------------------------------------------------------------------------------

%
refresh();

end

function btn_LRplus_interno_doIt(source, callbackdata, CDCanalysis)

%
% Plot root locus
%

% global variable
global _basePath;

%
% Load predefined data
% --------------------------------
load([_basePath filesep() 'data' filesep() 'loadCDCdata'])

% Plot root locus
% ----------------------------------
figure
delay=0;
[Kast,Kast_ult,wultimo,GM,wcg,PM]=GHrlocusplot(GHint.num{1,1},GHint.den{1,1},Krint,1000);
axisx=xlabel('Real G(s)H(s)'); axisy=ylabel('Imag. G(s)H(s)');
set(axisx,'fontsize',14);  
set(axisy,'fontsize',14);

end

function btn_Bodeplus_interno_doIt(source, callbackdata, CDCanalysis)

%
% Plot Bode diagrams
%

% global variable
global _basePath;

%
% Load predefined data
% --------------------------------
load([_basePath filesep() 'data' filesep() 'loadCDCdata'])

% Plot Bode diagrams
% ----------------------------------
figure();
delay=0;
[Kast,Kast_ult,wultimo,GM,wcg,PM]=GHbodeplot(GHint.num{1,1},GHint.den{1,1},delay,Krint);

end

function btn_Nyqplus_interno_doIt(source, callbackdata, CDCanalysis)


%
% Plot Bode diagrams
%

% global variable
global _basePath;

%
% Load predefined data
% --------------------------------
load([_basePath filesep() 'data' filesep() 'loadCDCdata'])

% Plot Nyquist diagram
% ----------------------------------
figure
delay=0;
[Kast,Kast_ult,wultimo,GM,wcg,PM]=GHnyquistplot(GHint.num{1,1},GHint.den{1,1},delay,Krint);

end

function btn_externalGHmap_doIt(source, callbackdata, CDCanalysis)

%
% Plot zeros-poles map of external G(s)H(s)
%

% global variable
global _basePath;

%
% Load predefined data
% --------------------------------
load([_basePath filesep() 'data' filesep() 'loadCDCdata'])

% ----------------------------------
% Zeros-Poles map of G(s)H(s)
% ----------------------------------
legend_ceros_string='Zeros of external G(s)H(s)';
legend_polos_string='Poles of external G(s)H(s)';

% Plot zeros-poles map
% ----------------------------------
axes(dlg.ImageZPGH);
xpzmap([],legend_ceros_string,legend_polos_string,GHext.num{1,1},GHext.den{1,1});
figuraGH=1;

end

function btn_externalGcl_doIt(source, callbackdata, CDCanalysis)

%
% Plot zeros-poles map of external closed loop system
%

% global variable
global _basePath;

%
% Load predefined data
% --------------------------------
load([_basePath filesep() 'data' filesep() 'loadCDCdata'])

% External closed loop transfer function,  Gclext(s)
Gastint1 = minreal(Cint*Gv*Gp2/(1+GHint));
Gclext = minreal(Cext*Gastint1*Gp1*Gt/(1+Gm1*Cext*Gastint1*Gp1));

% ------------------------------------------------------------------------------------
% Zeros-Poles map of internal closed loop system,  Gcl(s)
legend_ceros_string='Zeros of Cascade Control System';
legend_polos_string='Poles of Cascade Control System';

% Zeros-Poles map
% ----------------------------------
axes(dlg.ImageZPGLC);
xpzmap([],legend_ceros_string,legend_polos_string,Gclext.num{1,1},Gclext.den{1,1});
figuraGH=2;
% ------------------------------------------------------------------------------------

%
refresh();

end

function btn_rlocus_externalGH_doIt(source, callbackdata, CDCanalysis)

%
% Plot root locus
%

% global variable
global _basePath;

%
% Load predefined data
% --------------------------------
load([_basePath filesep() 'data' filesep() 'loadCDCdata'])

GHext, Krext

% Plot root locus
% ----------------------------------
axes(dlg.ImageLR);
cla(dlg.ImageLR, "reset");
[Kast,Kast_ult,wultimo,GM,wcg,PM]=GHrlocusplot(GHext.num{1,1},GHext.den{1,1},Krext,1000);
hold off

end

function btn_LRplus_externo_doIt(source, callbackdata, CDCanalysis)

%
% Plot root locus
%

% global variable
global _basePath;

%
% Load predefined data
% --------------------------------
load([_basePath filesep() 'data' filesep() 'loadCDCdata'])

% Plot root locus
% ----------------------------------
figure
delay=0;
[Kast,Kast_ult,wultimo,GM,wcg,PM]=GHrlocusplot(GHext.num{1,1},GHext.den{1,1},Krext,1000);
axisx=xlabel('Real G(s)H(s)'); axisy=ylabel('Imag. G(s)H(s)');
set(axisx,'fontsize',14);  
set(axisy,'fontsize',14);

end

function btn_Bode_externalGH_doIt(source, callbackdata, CDCanalysis)


%
% Plot Bode diagrams
%

% global variable
global _basePath;

%
% Load predefined data
% --------------------------------
load([_basePath filesep() 'data' filesep() 'loadCDCdata'])

% Plot Bode diagrams
% ----------------------------------
axes(dlg.ImageBodeMag);
cla(dlg.ImageBodeMag, "reset");
delay=0;
flagMagPha='gragicoMag';
[Kast,Kast_ult,wultimo,GM,wcg,PM]=bodeplotMagPha(GHext.num{1,1},GHext.den{1,1},delay,Krext,flagMagPha);
hold off
axes(dlg.ImageBodePha);
cla(dlg.ImageBodePha, "reset");
flagMagPha='gragicoPha';
[Kast,Kast_ult,wultimo,GM,wcg,PM]=bodeplotMagPha(GHext.num{1,1},GHext.den{1,1},delay,Krext,flagMagPha);
hold off

end

function btn_Bodeplus_externo_doIt(source, callbackdata, CDCanalysis)


%
% Plot Bode diagrams
%

% global variable
global _basePath;

%
% Load predefined data
% --------------------------------
load([_basePath filesep() 'data' filesep() 'loadCDCdata'])

% Plot Bode diagrams
% ----------------------------------
figure();
delay=0;
[Kast,Kast_ult,wultimo,GM,wcg,PM]=GHbodeplot(GHext.num{1,1},GHext.den{1,1},delay,Krext);

end

function btn_Nyquist_ixternalGH_doIt(source, callbackdata, CDCanalysis)


%
% Plot Bode diagrams
%

% global variable
global _basePath;

%
% Load predefined data
% --------------------------------
load([_basePath filesep() 'data' filesep() 'loadCDCdata'])

% Plot Nyquist diagram
% ----------------------------------
axes(dlg.ImageNyq);
cla(dlg.ImageNyq, "reset");
delay=0;
[Kast,Kast_ult,wultimo,GM,wcg,PM]=GHnyquistplot(GHext.num{1,1},GHext.den{1,1},delay,Krext);
hold off

end

function btn_Nyqplus_externo_doIt(source, callbackdata, CDCanalysis)


%
% Plot Bode diagrams
%

% global variable
global _basePath;

%
% Load predefined data
% --------------------------------
load([_basePath filesep() 'data' filesep() 'loadCDCdata'])

% Plot Nyquist diagram
% ----------------------------------
figure
delay=0;
[Kast,Kast_ult,wultimo,GM,wcg,PM]=GHnyquistplot(GHext.num{1,1},GHext.den{1,1},delay,Krext);

end

 
%
% Dialog creation windows function 
%
function ret = show_CDCanalysis()
  _scrSize = get(0, "screensize");
  _xPos = (_scrSize(3) - 1189)/2;
  _yPos = (_scrSize(4) - 673)/2;
   CDCanalysis = figure ( ... 
	'Color', [0.961 0.965 0.969], ...
	'Position', [_xPos _yPos 1189 673], ...
	'Resize', 'on', ...
	'windowstyle', 'normal', ...
	'MenuBar', 'none');
  analisisFF = uicontrol( ...
	'parent',CDCanalysis, ... 
	'Style','text', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 13, 'FontUnits', 'points', ... 
	'FontWeight', 'bold', ... 
	'HorizontalAlignment', 'left', ... 
	'Position', [335 653 342 20], ... 
	'String', 'Analysis Tools for Cascade Control System', ... 
	'TooltipString', '');
  btn_closeCDCanalysis = uicontrol( ...
	'parent',CDCanalysis, ... 
	'Style','pushbutton', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'Position', [1087 11 90 22], ... 
	'String', 'Close', ... 
	'TooltipString', '');
  btn_rlocus_internalGH = uicontrol( ...
	'parent',CDCanalysis, ... 
	'Style','pushbutton', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'Position', [172 365 117 23], ... 
	'String', 'Internal G(s)H(s', ... 
	'TooltipString', '');
  btn_Bode_internalGH = uicontrol( ...
	'parent',CDCanalysis, ... 
	'Style','pushbutton', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'Position', [495 365 114 23], ... 
	'String', 'Internal G(s)H(s', ... 
	'TooltipString', '');
  btn_Nyquist_internalGH = uicontrol( ...
	'parent',CDCanalysis, ... 
	'Style','pushbutton', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'Position', [912 365 118 23], ... 
	'String', 'Internal G(s)H(s', ... 
	'TooltipString', '');
  Label_2 = uicontrol( ...
	'parent',CDCanalysis, ... 
	'Style','text', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'bold', ... 
	'HorizontalAlignment', 'left', ... 
	'Position', [485 396 188 17], ... 
	'String', 'Analysis Based on G(s)H(s)', ... 
	'TooltipString', '');
  Label_3 = uicontrol( ...
	'parent',CDCanalysis, ... 
	'Style','text', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'bold', ... 
	'HorizontalAlignment', 'left', ... 
	'Position', [515 626 119 17], ... 
	'String', 'Poles-Zeros Map', ... 
	'TooltipString', '');
  btn_internalGHmap = uicontrol( ...
	'parent',CDCanalysis, ... 
	'Style','pushbutton', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'Position', [14 596 119 22], ... 
	'String', 'Internal G(s)H(s)', ... 
	'TooltipString', '');
  btn_internalGcl = uicontrol( ...
	'parent',CDCanalysis, ... 
	'Style','pushbutton', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'Position', [654 596 154 22], ... 
	'String', 'Internal Feedback', ... 
	'TooltipString', '');
  ImageZPGH = axes( ...
	'Units', 'pixels', ... 
	'parent',CDCanalysis, ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'Position', [185 451 301 164]);
  ImageLR = axes( ...
	'Units', 'pixels', ... 
	'parent',CDCanalysis, ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'Position', [40 59 298 259]);
  ImageBodeMag = axes( ...
	'Units', 'pixels', ... 
	'parent',CDCanalysis, ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'Position', [445 205 305 113]);
  ImageBodePha = axes( ...
	'Units', 'pixels', ... 
	'parent',CDCanalysis, ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'Position', [450 59 304 108]);
  ImageNyq = axes( ...
	'Units', 'pixels', ... 
	'parent',CDCanalysis, ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'Position', [850 58 305 260]);
  btn_LRplus_interno = uicontrol( ...
	'parent',CDCanalysis, ... 
	'Style','pushbutton', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'Position', [295 366 42 22], ... 
	'String', '+', ... 
	'TooltipString', '');
  btn_Bodeplus_interno = uicontrol( ...
	'parent',CDCanalysis, ... 
	'Style','pushbutton', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'Position', [615 366 43 22], ... 
	'String', '+', ... 
	'TooltipString', '');
  btn_Nyqplus_interno = uicontrol( ...
	'parent',CDCanalysis, ... 
	'Style','pushbutton', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'Position', [1035 366 42 22], ... 
	'String', '+', ... 
	'TooltipString', '');
  ImageZPGLC = axes( ...
	'Units', 'pixels', ... 
	'parent',CDCanalysis, ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'Position', [853 448 302 165]);
  btn_externalGHmap = uicontrol( ...
	'parent',CDCanalysis, ... 
	'Style','pushbutton', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'Position', [14 556 115 22], ... 
	'String', 'External G(s)H(s)', ... 
	'TooltipString', '');
  btn_externalGcl = uicontrol( ...
	'parent',CDCanalysis, ... 
	'Style','pushbutton', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'Position', [654 556 155 22], ... 
	'String', 'External Feedback', ... 
	'TooltipString', '');
  Label_33 = uicontrol( ...
	'parent',CDCanalysis, ... 
	'Style','text', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'bold', ... 
	'HorizontalAlignment', 'left', ... 
	'Position', [40 368 83 17], ... 
	'String', 'Root Locus:', ... 
	'TooltipString', '');
  btn_rlocus_externalGH = uicontrol( ...
	'parent',CDCanalysis, ... 
	'Style','pushbutton', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'Position', [170 336 119 22], ... 
	'String', 'External G(s)H(s)', ... 
	'TooltipString', '');
  btn_LRplus_externo = uicontrol( ...
	'parent',CDCanalysis, ... 
	'Style','pushbutton', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'Position', [295 336 42 22], ... 
	'String', '+', ... 
	'TooltipString', '');
  Label_34 = uicontrol( ...
	'parent',CDCanalysis, ... 
	'Style','text', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'bold', ... 
	'HorizontalAlignment', 'left', ... 
	'Position', [445 368 41 17], ... 
	'String', 'Bode:', ... 
	'TooltipString', '');
  btn_Bode_externalGH = uicontrol( ...
	'parent',CDCanalysis, ... 
	'Style','pushbutton', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'Position', [495 336 114 22], ... 
	'String', 'External G(s)H(s)', ... 
	'TooltipString', '');
  btn_Bodeplus_externo = uicontrol( ...
	'parent',CDCanalysis, ... 
	'Style','pushbutton', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'Position', [615 336 42 22], ... 
	'String', '+', ... 
	'TooltipString', '');
  btn_Nyquist_ixternalGH = uicontrol(
	'parent',CDCanalysis, ... 
	'Style','togglebutton', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'Position', [911 336 119 22], ... 
	'String', 'External G(s)H(s)', ... 
	'TooltipString', '', ... 
	'Min', 0, 'Max', 1, 'Value', 0);
  Label_36 = uicontrol( ...
	'parent',CDCanalysis, ... 
	'Style','text', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'bold', ... 
	'HorizontalAlignment', 'left', ... 
	'Position', [845 368 59 17], ... 
	'String', 'Nyquist:', ... 
	'TooltipString', '');
  btn_Nyqplus_externo = uicontrol( ...
	'parent',CDCanalysis, ... 
	'Style','pushbutton', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'Position', [1035 336 40 22], ... 
	'String', '+', ... 
	'TooltipString', '');
  Label_37 = uicontrol( ...
	'parent',CDCanalysis, ... 
	'Style','text', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'HorizontalAlignment', 'left', ... 
	'Position', [15 401 457 17], ... 
	'String', '______________________________________________________________', ... 
	'TooltipString', '');
  Label_38 = uicontrol( ...
	'parent',CDCanalysis, ... 
	'Style','text', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'HorizontalAlignment', 'left', ... 
	'Position', [700 396 487 17], ... 
	'String', '__________________________________________________________________', ... 
	'TooltipString', '');
  Label_39 = uicontrol( ...
	'parent',CDCanalysis, ... 
	'Style','text', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'HorizontalAlignment', 'left', ... 
	'Position', [305 631 184 17], ... 
	'String', '_________________________', ... 
	'TooltipString', '');
  Label_40 = uicontrol( ...
	'parent',CDCanalysis, ... 
	'Style','text', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'HorizontalAlignment', 'left', ... 
	'Position', [690 631 155 17], ... 
	'String', '_____________________', ... 
	'TooltipString', '');

  CDCanalysis = struct( ...
      'figure', CDCanalysis, ...
      'analisisFF', analisisFF, ...
      'btn_closeCDCanalysis', btn_closeCDCanalysis, ...
      'btn_rlocus_internalGH', btn_rlocus_internalGH, ...
      'btn_Bode_internalGH', btn_Bode_internalGH, ...
      'btn_Nyquist_internalGH', btn_Nyquist_internalGH, ...
      'Label_2', Label_2, ...
      'Label_3', Label_3, ...
      'btn_internalGHmap', btn_internalGHmap, ...
      'btn_internalGcl', btn_internalGcl, ...
      'ImageZPGH', ImageZPGH, ...
      'ImageLR', ImageLR, ...
      'ImageBodeMag', ImageBodeMag, ...
      'ImageBodePha', ImageBodePha, ...
      'ImageNyq', ImageNyq, ...
      'btn_LRplus_interno', btn_LRplus_interno, ...
      'btn_Bodeplus_interno', btn_Bodeplus_interno, ...
      'btn_Nyqplus_interno', btn_Nyqplus_interno, ...
      'ImageZPGLC', ImageZPGLC, ...
      'btn_externalGHmap', btn_externalGHmap, ...
      'btn_externalGcl', btn_externalGcl, ...
      'Label_33', Label_33, ...
      'btn_rlocus_externalGH', btn_rlocus_externalGH, ...
      'btn_LRplus_externo', btn_LRplus_externo, ...
      'Label_34', Label_34, ...
      'btn_Bode_externalGH', btn_Bode_externalGH, ...
      'btn_Bodeplus_externo', btn_Bodeplus_externo, ...
      'btn_Nyquist_ixternalGH', btn_Nyquist_ixternalGH, ...
      'Label_36', Label_36, ...
      'btn_Nyqplus_externo', btn_Nyqplus_externo, ...
      'Label_37', Label_37, ...
      'Label_38', Label_38, ...
      'Label_39', Label_39, ...
      'Label_40', Label_40);


  set (btn_closeCDCanalysis, 'callback', {@btn_closeCDCanalysis_doIt, CDCanalysis});
  set (btn_rlocus_internalGH, 'callback', {@btn_rlocus_internalGH_doIt, CDCanalysis});
  set (btn_Bode_internalGH, 'callback', {@btn_Bode_internalGH_doIt, CDCanalysis});
  set (btn_Nyquist_internalGH, 'callback', {@btn_Nyquist_internalGH_doIt, CDCanalysis});
  set (btn_internalGHmap, 'callback', {@btn_internalGHmap_doIt, CDCanalysis});
  set (btn_internalGcl, 'callback', {@btn_internalGcl_doIt, CDCanalysis});
  set (btn_LRplus_interno, 'callback', {@btn_LRplus_interno_doIt, CDCanalysis});
  set (btn_Bodeplus_interno, 'callback', {@btn_Bodeplus_interno_doIt, CDCanalysis});
  set (btn_Nyqplus_interno, 'callback', {@btn_Nyqplus_interno_doIt, CDCanalysis});
  set (btn_externalGHmap, 'callback', {@btn_externalGHmap_doIt, CDCanalysis});
  set (btn_externalGcl, 'callback', {@btn_externalGcl_doIt, CDCanalysis});
  set (btn_rlocus_externalGH, 'callback', {@btn_rlocus_externalGH_doIt, CDCanalysis});
  set (btn_LRplus_externo, 'callback', {@btn_LRplus_externo_doIt, CDCanalysis});
  set (btn_Bode_externalGH, 'callback', {@btn_Bode_externalGH_doIt, CDCanalysis});
  set (btn_Bodeplus_externo, 'callback', {@btn_Bodeplus_externo_doIt, CDCanalysis});
  set (btn_Nyquist_ixternalGH, 'callback', {@btn_Nyquist_ixternalGH_doIt, CDCanalysis});
  set (btn_Nyqplus_externo, 'callback', {@btn_Nyqplus_externo_doIt, CDCanalysis});
  dlg = struct(CDCanalysis);


% load packages
%pkg load control;
%pkg load linear-algebra;
%pkg load odepkg;
%pkg load optim;
%pkg load signal;
%pkg load struct;

% global variable
global _basePath;

%
% Load predefined data
% --------------------------------
load([_basePath filesep() 'data' filesep() 'loadCDCdata'])











































  ret = CDCanalysis;
end

