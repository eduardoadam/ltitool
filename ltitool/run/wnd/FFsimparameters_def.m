%
% Set the graphics toolkit and force read this file as script file (not a function file).
%
graphics_toolkit qt;
%


%
%
% Begin callbacks definitions 
%

function btn_closeFFsimulpaameters_doIt(source, callbackdata, FFsimparameters)

% global variable
global _basePath;

% I get the data from the window
amplitud_sp = eval(get(dlg.amplitud_sp, 'string'));
T_sp = eval(get(dlg.T_sp, 'string'));
amplitud_l = eval(get(dlg.amplitud_l, 'string'));
T_l = eval(get(dlg.T_l, 'string'));
TFinal = eval(get(dlg.TFinal, 'string'));
haChCarga = get(dlg.Load_change, 'value');
haChCons = get(dlg.SP_change, 'value');

% Save data
save([_basePath filesep() 'data' filesep() 'loadFFsim'],'T_sp','T_l','TFinal','amplitud_sp','amplitud_l', ...
                                           'haChCons', 'haChCarga')      

% Close window
close(dlg.FFsimparameters);

end

 
%
% Dialog creation windows function 
%
function ret = show_FFsimparameters()
  _scrSize = get(0, "screensize");
  _xPos = (_scrSize(3) - 545)/2;
  _yPos = (_scrSize(4) - 349)/2;
   FFsimparameters = figure ( ... 
	'Color', [0.961 0.965 0.969], ...
	'Position', [_xPos _yPos 545 349], ...
	'Resize', 'on', ...
	'windowstyle', 'normal', ...
	'MenuBar', 'none');
  Label_20 = uicontrol( ...
	'parent',FFsimparameters, ... 
	'Style','text', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 13, 'FontUnits', 'points', ... 
	'FontWeight', 'bold', ... 
	'HorizontalAlignment', 'left', ... 
	'Position', [170 304 186 20], ... 
	'String', 'Simutation Parameters', ... 
	'TooltipString', '');
  k_sp = uicontrol( ...
	'parent',FFsimparameters, ... 
	'Style','text', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'HorizontalAlignment', 'left', ... 
	'Position', [30 217 118 17], ... 
	'String', 'SP Step Amplitud', ... 
	'TooltipString', '');
  k_l = uicontrol( ...
	'parent',FFsimparameters, ... 
	'Style','text', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'HorizontalAlignment', 'left', ... 
	'Position', [295 217 122 17], ... 
	'String', 'Load Step Change', ... 
	'TooltipString', '');
  amplitud_sp = uicontrol( ...
	'parent',FFsimparameters, ... 
	'Style','edit', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [1.000 1.000 1.000], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'HorizontalAlignment', 'left', ... 
	'Position', [175 215 54 22], ... 
	'String', '', ... 
	'TooltipString', '');
  amplitud_l = uicontrol( ...
	'parent',FFsimparameters, ... 
	'Style','edit', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [1.000 1.000 1.000], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'HorizontalAlignment', 'left', ... 
	'Position', [440 215 49 22], ... 
	'String', '', ... 
	'TooltipString', '');
  Label_25 = uicontrol( ...
	'parent',FFsimparameters, ... 
	'Style','text', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'HorizontalAlignment', 'left', ... 
	'Position', [30 179 73 17], ... 
	'String', 'Input Time', ... 
	'TooltipString', '');
  Label_26 = uicontrol( ...
	'parent',FFsimparameters, ... 
	'Style','text', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'HorizontalAlignment', 'left', ... 
	'Position', [295 179 73 17], ... 
	'String', 'Input Time', ... 
	'TooltipString', '');
  T_sp = uicontrol( ...
	'parent',FFsimparameters, ... 
	'Style','edit', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [1.000 1.000 1.000], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'HorizontalAlignment', 'left', ... 
	'Position', [175 177 54 22], ... 
	'String', '', ... 
	'TooltipString', '');
  T_l = uicontrol( ...
	'parent',FFsimparameters, ... 
	'Style','edit', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [1.000 1.000 1.000], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'HorizontalAlignment', 'left', ... 
	'Position', [441 177 48 22], ... 
	'String', '', ... 
	'TooltipString', '');
  Label_27 = uicontrol( ...
	'parent',FFsimparameters, ... 
	'Style','text', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'bold', ... 
	'HorizontalAlignment', 'left', ... 
	'Position', [30 117 77 17], ... 
	'String', 'Simulation', ... 
	'TooltipString', '');
  Label_28 = uicontrol( ...
	'parent',FFsimparameters, ... 
	'Style','text', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'HorizontalAlignment', 'left', ... 
	'Position', [30 82 109 17], ... 
	'String', 'Simulation Time', ... 
	'TooltipString', '');
  TFinal = uicontrol( ...
	'parent',FFsimparameters, ... 
	'Style','edit', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [1.000 1.000 1.000], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'HorizontalAlignment', 'left', ... 
	'Position', [175 82 90 22], ... 
	'String', '', ... 
	'TooltipString', '');
  btn_closeFFsimulpaameters = uicontrol( ...
	'parent',FFsimparameters, ... 
	'Style','pushbutton', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'Position', [439 22 90 22], ... 
	'String', 'OK', ... 
	'TooltipString', '');
  SP_change = uicontrol( ...
	'parent',FFsimparameters, ... 
	'Style','checkbox', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'bold', ... 
	'Position', [30 252 124 17], ... 
	'String', 'Set-Point Change', ... 
	'TooltipString', '', ... 
	'Min', 0, 'Max', 1, 'Value', 1);
  Load_change = uicontrol( ...
	'parent',FFsimparameters, ... 
	'Style','checkbox', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'bold', ... 
	'Position', [295 252 92 17], ... 
	'String', 'Load Change', ... 
	'TooltipString', '', ... 
	'Min', 0, 'Max', 1, 'Value', 1);

  FFsimparameters = struct( ...
      'figure', FFsimparameters, ...
      'Label_20', Label_20, ...
      'k_sp', k_sp, ...
      'k_l', k_l, ...
      'amplitud_sp', amplitud_sp, ...
      'amplitud_l', amplitud_l, ...
      'Label_25', Label_25, ...
      'Label_26', Label_26, ...
      'T_sp', T_sp, ...
      'T_l', T_l, ...
      'Label_27', Label_27, ...
      'Label_28', Label_28, ...
      'TFinal', TFinal, ...
      'btn_closeFFsimulpaameters', btn_closeFFsimulpaameters, ...
      'SP_change', SP_change, ...
      'Load_change', Load_change);


  set (btn_closeFFsimulpaameters, 'callback', {@btn_closeFFsimulpaameters_doIt, FFsimparameters});
  dlg = struct(FFsimparameters);

% global variable
global _basePath;

%  Load data
load([_basePath filesep() 'data' filesep() 'loadFFsim'])

% Show data on window
dlg=FFsimparameters;
set(dlg.amplitud_sp,'string',num2str(amplitud_sp));
set(dlg.T_sp,'string',num2str(T_sp));
set(dlg.amplitud_l,'string',num2str(amplitud_l));
set(dlg.T_l,'string',num2str(T_l));
set(dlg.TFinal,'string',num2str(TFinal));
set(dlg.Load_change, 'value', haChCarga);
set(dlg.SP_change, 'value', haChCons);











































  ret = FFsimparameters;
end

