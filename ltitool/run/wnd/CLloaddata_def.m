%
% Set the graphics toolkit and force read this file as script file (not a function file).
%
graphics_toolkit qt;
%


%
%
% Begin callbacks definitions 
%

function btn_closeGCLloaddata_doIt(source, callbackdata, CLloaddata)


% global variable
global _basePath;

% Complex variable "s"
s=tf('s');
% Define transfer functions
% ----------------------------------------------------------------
% Gp(s)
numGp = get(dlg.numGp, 'string');
denGp = get(dlg.denGp, 'string');
sysStrGp = strcat('(',numGp,')', '/','(', denGp,')');
Gp = tf(eval(sysStrGp));
% Gl(s)
numGl = get(dlg.numGl, 'string');
denGl = get(dlg.denGl, 'string');
sysStrGl = strcat('(',numGl,')', '/','(', denGl,')');
Gl = tf(eval(sysStrGl));
% Gm(s)
numGm = get(dlg.numGm, 'string');
denGm = get(dlg.denGm, 'string');
sysStrGm = strcat('(',numGm,')', '/','(', denGm,')');
Gm = tf(eval(sysStrGm));
% Gt(s)
numGt = get(dlg.numGt, 'string');
denGt = get(dlg.denGt, 'string');
sysStrGt = strcat('(',numGt,')', '/','(', denGt,')');
Gt = tf(eval(sysStrGt));
% Gv(s)
numGv = get(dlg.numGv, 'string');
denGv = get(dlg.denGv, 'string');
sysStrGv = strcat('(',numGv,')', '/','(', denGv,')');
Gv = tf(eval(sysStrGv));
% Gc(s)
numGcomp = get(dlg.numGcomp, 'string');
denGcomp = get(dlg.denGcomp, 'string');
sysStrGcomp = strcat('(',numGcomp,')', '/','(', denGcomp,')');
Gcomp = tf(eval(sysStrGcomp));

% Opcions of radio button: PID controller
% -----------------------------------------------------------------
op1 = get(dlg.PID_rb, 'Value');			% PID
op2 = get(dlg.Compensador_rb, 'Value');		% Compensator


if ((op1 == 1) && (op2 == 1))
  disp('You can not take two options');
elseif (op1 == 1)
  %Option 1: PID controller
  if(get(dlg.Mode_P,'value') == 1) 
     % if the options is P mode
     Kr=str2num(get(dlg.Kr,'string'));
   else
     Kr=0;
   endif
  if(get(dlg.Mode_D,'value') == 1) 
     % if the options is D mode 
     TD=str2num(get(dlg.TD,'string'));;
   else
     TD=0;
  endif
  if(get(dlg.Mode_I,'value') == 1) 
     % if the options is I mode
     TI=str2num(get(dlg.TI,'string'));;
     Gc=Kr+Kr/(TI*s)+Kr*TD*s;
   else
     TI=0;
     Gc=Kr+Kr*TD*s;
  endif
 elseif (op2 == 1)
     %Opction 2:  Compensator
     Gc = Gcomp;
     % set Kr=1, to avoid error
     Kr=1; TI=1; TD=0;
else
  disp('You must take an option');
endif

% G(s)H(s)
GH=Gp*Gv*Gc*Gm;

% Save data
tiempo_muerto=0.0;
save([_basePath filesep() 'data' filesep() 'loadCLdata'],'Gp','Gl','Gm','Gt','Gv','Gc','Gcomp','tiempo_muerto','GH','Kr','TI','TD')

% Close window
close(CLloaddata.CLloaddata);

end

function PID_rb_doIt(source, callbackdata, CLloaddata)

  set(dlg.PID_rb, 'Value', 1);
  set(dlg.Compensador_rb, 'Value', 0);

end

function Compensador_rb_doIt(source, callbackdata, CLloaddata)

  set(dlg.PID_rb, 'Value', 0);
  set(dlg.Compensador_rb, 'Value', 1);

end

 
%
% Dialog creation windows function 
%
function ret = show_CLloaddata()
  _scrSize = get(0, "screensize");
  _xPos = (_scrSize(3) - 737)/2;
  _yPos = (_scrSize(4) - 578)/2;
   CLloaddata = figure ( ... 
	'Color', [0.961 0.965 0.969], ...
	'Position', [_xPos _yPos 737 578], ...
	'Resize', 'on', ...
	'windowstyle', 'normal', ...
	'MenuBar', 'none');
  numGp = uicontrol( ...
	'parent',CLloaddata, ... 
	'Style','text', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'HorizontalAlignment', 'left', ... 
	'Position', [245 483 173 17], ... 
	'String', 'bm*s^m+......+b1*s^1+b0 ', ... 
	'TooltipString', '');
  numGp = uicontrol( ...
	'parent',CLloaddata, ... 
	'Style','edit', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [1.000 1.000 1.000], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'HorizontalAlignment', 'left', ... 
	'Position', [80 481 147 22], ... 
	'String', '', ... 
	'TooltipString', '');
  Gp = uicontrol( ...
	'parent',CLloaddata, ... 
	'Style','text', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'HorizontalAlignment', 'left', ... 
	'Position', [20 451 208 17], ... 
	'String', 'Gp(s) = -----------------------------------', ... 
	'TooltipString', '');
  denGp = uicontrol( ...
	'parent',CLloaddata, ... 
	'Style','edit', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [1.000 1.000 1.000], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'HorizontalAlignment', 'left', ... 
	'Position', [80 421 145 22], ... 
	'String', '', ... 
	'TooltipString', '');
  demGp = uicontrol( ...
	'parent',CLloaddata, ... 
	'Style','text', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'HorizontalAlignment', 'left', ... 
	'Position', [245 423 154 17], ... 
	'String', 'an*s^n+.....+a1*s^1+a0', ... 
	'TooltipString', '');
  Label_31 = uicontrol( ...
	'parent',CLloaddata, ... 
	'Style','text', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 13, 'FontUnits', 'points', ... 
	'FontWeight', 'bold', ... 
	'HorizontalAlignment', 'left', ... 
	'Position', [205 548 371 20], ... 
	'String', 'Transfer Functions of the Closed Loop System', ... 
	'TooltipString', '');
  btn_closeGCLloaddata = uicontrol( ...
	'parent',CLloaddata, ... 
	'Style','pushbutton', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'Position', [635 16 90 22], ... 
	'String', 'OK', ... 
	'TooltipString', '');
  Gl = uicontrol( ...
	'parent',CLloaddata, ... 
	'Style','text', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'HorizontalAlignment', 'left', ... 
	'Position', [440 451 206 17], ... 
	'String', 'Gl(s) = ----------------------------------- ', ... 
	'TooltipString', '');
  numGl = uicontrol( ...
	'parent',CLloaddata, ... 
	'Style','edit', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [1.000 1.000 1.000], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'HorizontalAlignment', 'left', ... 
	'Position', [485 481 152 22], ... 
	'String', '', ... 
	'TooltipString', '');
  denGl = uicontrol( ...
	'parent',CLloaddata, ... 
	'Style','edit', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [1.000 1.000 1.000], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'HorizontalAlignment', 'left', ... 
	'Position', [485 421 147 22], ... 
	'String', '', ... 
	'TooltipString', '');
  Label_21 = uicontrol( ...
	'parent',CLloaddata, ... 
	'Style','text', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'bold', ... 
	'HorizontalAlignment', 'left', ... 
	'Position', [20 511 38 17], ... 
	'String', 'Plant', ... 
	'TooltipString', '');
  Label_22 = uicontrol( ...
	'parent',CLloaddata, ... 
	'Style','text', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'bold', ... 
	'HorizontalAlignment', 'left', ... 
	'Position', [20 381 138 17], ... 
	'String', 'Measuring Element', ... 
	'TooltipString', '');
  Gm = uicontrol( ...
	'parent',CLloaddata, ... 
	'Style','text', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'HorizontalAlignment', 'left', ... 
	'Position', [20 326 176 17], ... 
	'String', 'Gm(s) = ---------------------------', ... 
	'TooltipString', '');
  numGm = uicontrol( ...
	'parent',CLloaddata, ... 
	'Style','edit', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [1.000 1.000 1.000], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'HorizontalAlignment', 'left', ... 
	'Position', [75 351 90 22], ... 
	'String', '', ... 
	'TooltipString', '');
  denGm = uicontrol( ...
	'parent',CLloaddata, ... 
	'Style','edit', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [1.000 1.000 1.000], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'HorizontalAlignment', 'left', ... 
	'Position', [75 296 90 22], ... 
	'String', '', ... 
	'TooltipString', '');
  Gt = uicontrol( ...
	'parent',CLloaddata, ... 
	'Style','text', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'HorizontalAlignment', 'left', ... 
	'Position', [220 326 164 17], ... 
	'String', 'Gt(s) = --------------------------', ... 
	'TooltipString', '');
  Label_25 = uicontrol( ...
	'parent',CLloaddata, ... 
	'Style','text', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'bold', ... 
	'HorizontalAlignment', 'left', ... 
	'Position', [220 381 113 17], ... 
	'String', 'Input Converter', ... 
	'TooltipString', '');
  Label_26 = uicontrol( ...
	'parent',CLloaddata, ... 
	'Style','text', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'bold', ... 
	'HorizontalAlignment', 'left', ... 
	'Position', [435 381 156 17], ... 
	'String', 'Final Control Element', ... 
	'TooltipString', '');
  numGt = uicontrol( ...
	'parent',CLloaddata, ... 
	'Style','edit', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [1.000 1.000 1.000], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'HorizontalAlignment', 'left', ... 
	'Position', [265 351 90 22], ... 
	'String', '', ... 
	'TooltipString', '');
  denGt = uicontrol( ...
	'parent',CLloaddata, ... 
	'Style','edit', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [1.000 1.000 1.000], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'HorizontalAlignment', 'left', ... 
	'Position', [265 296 90 22], ... 
	'String', '', ... 
	'TooltipString', '');
  Gv = uicontrol( ...
	'parent',CLloaddata, ... 
	'Style','text', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'HorizontalAlignment', 'left', ... 
	'Position', [435 326 179 17], ... 
	'String', 'Gv(s) = -----------------------------', ... 
	'TooltipString', '');
  numGv = uicontrol( ...
	'parent',CLloaddata, ... 
	'Style','edit', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [1.000 1.000 1.000], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'HorizontalAlignment', 'left', ... 
	'Position', [490 351 90 22], ... 
	'String', '', ... 
	'TooltipString', '');
  denGv = uicontrol( ...
	'parent',CLloaddata, ... 
	'Style','edit', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [1.000 1.000 1.000], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'HorizontalAlignment', 'left', ... 
	'Position', [490 296 90 22], ... 
	'String', '', ... 
	'TooltipString', '');
  controlador = uicontrol( ...
	'parent',CLloaddata, ... 
	'Style','text', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'bold', ... 
	'HorizontalAlignment', 'left', ... 
	'Position', [270 251 74 17], ... 
	'String', 'Controller', ... 
	'TooltipString', '');
  Kr = uicontrol( ...
	'parent',CLloaddata, ... 
	'Style','edit', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [1.000 1.000 1.000], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'HorizontalAlignment', 'left', ... 
	'Position', [120 184 90 22], ... 
	'String', '1.0', ... 
	'TooltipString', '');
  TI = uicontrol( ...
	'parent',CLloaddata, ... 
	'Style','edit', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [1.000 1.000 1.000], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'HorizontalAlignment', 'left', ... 
	'Position', [320 184 90 22], ... 
	'String', '1.0', ... 
	'TooltipString', '');
  TD = uicontrol( ...
	'parent',CLloaddata, ... 
	'Style','edit', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [1.000 1.000 1.000], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'HorizontalAlignment', 'left', ... 
	'Position', [525 184 90 22], ... 
	'String', '0.0', ... 
	'TooltipString', '');
  Label_32 = uicontrol( ...
	'parent',CLloaddata, ... 
	'Style','text', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'HorizontalAlignment', 'left', ... 
	'Position', [10 256 243 17], ... 
	'String', '_________________________________', ... 
	'TooltipString', '');
  Gc = uicontrol( ...
	'parent',CLloaddata, ... 
	'Style','text', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'HorizontalAlignment', 'left', ... 
	'Position', [25 96 188 17], ... 
	'String', 'Gc(s) = -------------------------------', ... 
	'TooltipString', '');
  numGcomp = uicontrol( ...
	'parent',CLloaddata, ... 
	'Style','edit', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [1.000 1.000 1.000], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'HorizontalAlignment', 'left', ... 
	'Position', [80 111 90 22], ... 
	'String', '', ... 
	'TooltipString', '');
  denGcomp = uicontrol( ...
	'parent',CLloaddata, ... 
	'Style','edit', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [1.000 1.000 1.000], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'HorizontalAlignment', 'left', ... 
	'Position', [80 66 90 22], ... 
	'String', '', ... 
	'TooltipString', '');
  Label_37 = uicontrol( ...
	'parent',CLloaddata, ... 
	'Style','text', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'HorizontalAlignment', 'left', ... 
	'Position', [365 256 243 17], ... 
	'String', '_________________________________', ... 
	'TooltipString', '');
  Label_39 = uicontrol( ...
	'parent',CLloaddata, ... 
	'Style','text', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'HorizontalAlignment', 'left', ... 
	'Position', [20 41 612 17], ... 
	'String', '___________________________________________________________________________________', ... 
	'TooltipString', '');
  Mode_P = uicontrol( ...
	'parent',CLloaddata, ... 
	'Style','checkbox', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'Position', [20 186 52 17], ... 
	'String', 'P Mode', ... 
	'TooltipString', '', ... 
	'Min', 0, 'Max', 1, 'Value', 1);
  Mode_I = uicontrol( ...
	'parent',CLloaddata, ... 
	'Style','checkbox', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'Position', [235 186 47 17], ... 
	'String', 'I Mode', ... 
	'TooltipString', '', ... 
	'Min', 0, 'Max', 1, 'Value', 1);
  Mode_D = uicontrol( ...
	'parent',CLloaddata, ... 
	'Style','checkbox', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'Position', [430 186 53 17], ... 
	'String', 'D Mode', ... 
	'TooltipString', '', ... 
	'Min', 0, 'Max', 1, 'Value', 0);
  PID_rb = uicontrol( ...
	'parent',CLloaddata, ... 
	'Style','radiobutton', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'bold', ... 
	'Position', [20 226 25 17], ... 
	'String', 'PID', ... 
	'TooltipString', '', ... 
	'Min', 0, 'Max', 1, 'Value', 1);
  Compensador_rb = uicontrol( ...
	'parent',CLloaddata, ... 
	'Style','radiobutton', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'bold', ... 
	'Position', [20 141 96 17], ... 
	'String', 'Compensator', ... 
	'TooltipString', '', ... 
	'Min', 0, 'Max', 1, 'Value', 0);
  Label_PID = uicontrol( ...
	'parent',CLloaddata, ... 
	'Style','text', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.961 0.965 0.969], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Ubuntu', ... 
	'FontSize', 11, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'HorizontalAlignment', 'left', ... 
	'Position', [130 226 144 17], ... 
	'String', 'C(s)=Kr(1+1/TIs+TDs)', ... 
	'TooltipString', '');

  CLloaddata = struct( ...
      'figure', CLloaddata, ...
      'numGp', numGp, ...
      'numGp', numGp, ...
      'Gp', Gp, ...
      'denGp', denGp, ...
      'demGp', demGp, ...
      'Label_31', Label_31, ...
      'btn_closeGCLloaddata', btn_closeGCLloaddata, ...
      'Gl', Gl, ...
      'numGl', numGl, ...
      'denGl', denGl, ...
      'Label_21', Label_21, ...
      'Label_22', Label_22, ...
      'Gm', Gm, ...
      'numGm', numGm, ...
      'denGm', denGm, ...
      'Gt', Gt, ...
      'Label_25', Label_25, ...
      'Label_26', Label_26, ...
      'numGt', numGt, ...
      'denGt', denGt, ...
      'Gv', Gv, ...
      'numGv', numGv, ...
      'denGv', denGv, ...
      'controlador', controlador, ...
      'Kr', Kr, ...
      'TI', TI, ...
      'TD', TD, ...
      'Label_32', Label_32, ...
      'Gc', Gc, ...
      'numGcomp', numGcomp, ...
      'denGcomp', denGcomp, ...
      'Label_37', Label_37, ...
      'Label_39', Label_39, ...
      'Mode_P', Mode_P, ...
      'Mode_I', Mode_I, ...
      'Mode_D', Mode_D, ...
      'PID_rb', PID_rb, ...
      'Compensador_rb', Compensador_rb, ...
      'Label_PID', Label_PID);


  set (btn_closeGCLloaddata, 'callback', {@btn_closeGCLloaddata_doIt, CLloaddata});
  set (PID_rb, 'callback', {@PID_rb_doIt, CLloaddata});
  set (Compensador_rb, 'callback', {@Compensador_rb_doIt, CLloaddata});
  dlg = struct(CLloaddata);


% global variable
global _basePath;

%
% Load predefined data
% --------------------------------
load([_basePath filesep() 'data' filesep() 'loadCLdata'])


% Show data loaded in the window to be able to change them
set(CLloaddata.numGp,'string',polyout(Gp.num{1,1})); 
set(CLloaddata.denGp,'string',polyout(Gp.den{1,1}));
set(CLloaddata.numGl,'string',polyout(Gl.num{1,1}));
set(CLloaddata.denGl,'string',polyout(Gl.den{1,1}));
set(CLloaddata.numGm,'string',polyout(Gm.num{1,1}));
set(CLloaddata.denGm,'string',polyout(Gm.den{1,1}));
set(CLloaddata.numGt,'string',polyout(Gt.num{1,1}));
set(CLloaddata.denGt,'string',polyout(Gt.den{1,1}));
set(CLloaddata.numGv,'string',polyout(Gv.num{1,1}));
set(CLloaddata.denGv,'string',polyout(Gv.den{1,1}));
set(CLloaddata.numGcomp,'string',polyout(Gcomp.num{1,1}));
set(CLloaddata.denGcomp,'string',polyout(Gcomp.den{1,1}));

% Controller opcions
if(Kr==0)
	set(CLloaddata.Mode_P,'value',0);
	% If the option is not P  mode
	set(CLloaddata.Kr,'string','0');
else
	set(CLloaddata.Mode_P,'value',1);
	% If the option is P  mode
	set(CLloaddata.Kr,'string',num2str(Kr));
endif
if(TD==0)
	set(CLloaddata.Mode_D,'value',0);
	% If the option is not D mode
	set(CLloaddata.TD,'string','0');
else
	set(CLloaddata.Mode_D,'value',1);
	% If the option is D mode  
	set(CLloaddata.TD,'string',num2str(TD));
endif
if (TI==0)
	set(CLloaddata.Mode_I,'value',0);
	% If the option is not I mode 
	set(CLloaddata.TI,'string','0');
else
	set(CLloaddata.Mode_I,'value',1);
	% If the option is I mode 
	set(CLloaddata.TI,'string',num2str(TI));
endif


































































  ret = CLloaddata;
end

